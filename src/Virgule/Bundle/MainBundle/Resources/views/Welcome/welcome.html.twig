{% extends '::main_content.html.twig' %}
{% block content_title %}{{ random(['Bienvenue', 'Salut', 'Hello', 'Bonjour']) }} {{ app.user.firstname }} !{% endblock %}
{% block main_content %}
    <div class="row-fluid">
      <div class="span3">
          <div class="widget-box">
                <div class="widget-title">
                        <span class="icon">
                                <i class="icon-th-list"></i>
                        </span>
                        <h5>Mes cours</h5>
                </div>
                <div class="widget-content">
                    <ul>
                        {% if myCourses is empty %}
                            Vous ne dirigez aucun cours pour le moment !
                        {% else %}
                            {% for course in myCourses %}
                                <li>Niveau {{ course.classLevel }} le {{ course.dayOfWeek| day }} de {{ course.startTime|date('H:i') }} à {{ course.endTime|date('H:i') }} 
                                    <br /><a  class="btn virgule-btn" href="{{ path('classsession_add', { 'course_id': course.id }) }}"><i class="icon-add"></i> Ajouter un compte-rendu</a>
                                </li>
                            {% endfor %}
                        {% endif %}
                    </ul>
                    <p><a class="btn virgule-btn" href="{{ path('course_index') }}"><i class="icon-go"></i> Voir tous les cours</a></p>
                </div>
            </div>
      </div><!--/span-->
      <div class="span9">
          <div class="widget-box">
                <div class="widget-title">
                        <span class="icon">
                                <i class="icon-th-list"></i>
                        </span>
                        <h5>Mes apprenants ({{ nbMyStudents }})</h5>
                </div>
                <div class="widget-content">
                        {% if myStudents is empty %}
                            Aucun apprenant n'est inscrit à l'un de vos cours pour le moment.
                        {% else %}
                            <div class="left_list">
                                <ul>
                                {% for student in myStudents %}
                                    <li class="user_{{ student['gender'] }}">
                                        <a href="{{ path('student_show', { 'id': student['id'] }) }}">{{ student['firstname']}} {{ student['lastname'] }}</a>
                                        {% if student['nb_comments'] > 0 %}
                                            <img src="{{ asset('img/icons/comment.png') }}" title="{{ student['nb_comments'] }} commentaire(s)" alt="{{ student['nb_comments'] }} commentaire(s)" />
                                        {% endif %}
                                    </li>
                                    {% if loop.index % nbMyStudentsLineBreak == 0  and loop.index != loop.last %}
                                        </ul></div><div class="left_list"><ul>
                                    {% endif %}
                                {% endfor %}
                                </ul>
                            </div>
                        {% endif %}                        
                  <div class="clear_list"></div>
                  <p><a class="btn virgule-btn" href="{{ path('student_index') }}"><i class="icon-go"></i> Voir tous les apprenants</a></p>
                </div>
            </div>
      </div><!--/span-->
    </div><!--/row-->
    <div class="row-fluid">
      <div class="span3">          
          <div class="widget-box">
                <div class="widget-title">
                        <span class="icon">
                                <i class="icon-th-list"></i>
                        </span>
                        <h5>Mes compte-rendus</h5>
                </div>
                <div class="widget-content">
                    {% if myClassSessions is empty %}
                        Vous n'avez enregistré aucun compte-rendu pour le moment, voulez-vous le faire <a href="{{ path('classsession_new') }}">maintenant</a> ?
                    {% else %}
                        <div class="left_list">
                            <ul>
                            {% for classSession in myClassSessions %}
                                <li><a href="{{ path('classsession_show', { 'id': classSession.id }) }}">{{ classSession.date | date("d/m/Y") }}</a>
                                {% if classSession.nb_comments > 0 %}
                                    <img src="{{ asset('img/icons/comment.png') }}" title="{{ classSession.nb_comments }} commentaire(s)" alt="{{ classSession.nb_comments }} commentaire(s)" />
                                {% endif %}
                                </li>
                                {% if loop.index == myClassSessionsLineBreak and loop.index != loop.last %}
                                    </ul></div><div class="left_list"><ul>
                                {% endif %}
                            {% endfor %}
                            </ul>
                         </div>
                    {% endif %}                
                <div class="clear_list"></div>
                <p><a class="btn virgule-btn" href="{{ path('classsession_index') }}"><i class="icon-go"></i> Voir tous mes compte-rendus</a></p>
                </div>
            </div>
      </div><!--/span-->
      <div class="span4">          
          <div class="widget-box">
                <div class="widget-title">
                        <span class="icon">
                                <i class="icon-th-list"></i>
                        </span>
                        <h5>Mes documents</h5>
                </div>
                <div class="widget-content">
                    <ul>
                        <li>Document A</li>
                        <li>Document B</li>
                        <li>Document C</li>
                        <li>Document D</li>
                        <li>Document E</li>
                    </ul>
                    <p><a class="btn virgule-btn" href="{{ path('classsession_index') }}"><i class="icon-go"></i> Voir tous les documents</a></p>
                </div>
            </div>
      </div><!--/span-->
      <div class="span5">          
          <div class="widget-box">
                <div class="widget-title">
                        <span class="icon">
                                <i class="icon-th-list"></i>
                        </span>
                        <h5>Dernier compte-rendus enregistrés</h5>
                </div>
                <div class="widget-content">
                    <div class="left_list">
                        <ul>
                            {% if latestClassSessions is empty %}
                                Aucun compte-rendu enregistré pour le moment.
                            {% else %}
                                {% for classSession in latestClassSessions %}
                                    <li>
                                        <a href="{{ path('classsession_show', { 'id': classSession['id'] }) }}">{{ classSession['date'] | date("d/m/Y") }}</a>
                                        {% if classSession['nb_comments'] > 0 %}
                                                <img src="{{ asset('img/icons/comment.png') }}" title="{{ classSession['nb_comments'] }} commentaire(s)" alt="{{ classSession['nb_comments'] }} commentaire(s)" />
                                        {% endif %}
                                    </li>                            
                                    {% if loop.index == latestClassSessionsLineBreak and loop.index != loop.last %}
                                        </ul></div><div class="left_list"><ul>
                                    {% endif %}
                            {% endfor %}
                        {% endif %}
                    </ul>
                </div>
                <div class="clear_list"></div>
                <p><a class="btn virgule-btn" href="{{ path('classsession_index') }}"><i class="icon-go"></i> Voir tous les compte-rendus</a></p>
                </div>
            </div>
      </div><!--/span-->
    </div><!--/row-->
    </div><!--/span-->
{% endblock %}